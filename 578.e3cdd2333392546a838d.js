"use strict";(self.webpackChunktc_frontend=self.webpackChunktc_frontend||[]).push([[578],{6593:(e,r,t)=>{t.d(r,{A:()=>a});var n=t(1601),o=t.n(n),l=t(6314),s=t.n(l)()(o());s.push([e.id,".src-shared-ui-Input-Input-module__Input--X8EVb{display:flex;box-sizing:border-box;padding:10px 10px 10px 20px;align-self:center;height:32px;font:var(--font-m);width:160px;border-radius:5px;box-shadow:0px 0px 1px #000;outline:none;background-color:var(--bg-color-primary);border:1px dashed var(--primary-color)}.src-shared-ui-Input-Input-module__Input--X8EVb:focus{border:1px solid var(--primary-color)}.src-shared-ui-Input-Input-module__login--LzNVq{font:var(--font-login);background-color:#fff;width:100%;height:fit-content;padding:5px}.src-shared-ui-Input-Input-module__filter--QPHN8{border:1px dashed var(--secondary-color);height:var(--font-line-m);padding:14px}.src-shared-ui-Input-Input-module__filter--QPHN8:focus{border:1px solid var(--secondary-color)}.src-shared-ui-Input-Input-module__error--BgTYZ{background-color:var(--bg-color-input-error)}",""]),s.locals={Input:"src-shared-ui-Input-Input-module__Input--X8EVb",login:"src-shared-ui-Input-Input-module__login--LzNVq",filter:"src-shared-ui-Input-Input-module__filter--QPHN8",error:"src-shared-ui-Input-Input-module__error--BgTYZ"};const a=s},8919:(e,r,t)=>{t.d(r,{A:()=>a});var n=t(1601),o=t.n(n),l=t(6314),s=t.n(l)()(o());s.push([e.id,".src-shared-ui-FieldInput-FieldInput-module__FieldInput--Nmd6r{width:100%;display:flex;gap:40px}.src-shared-ui-FieldInput-FieldInput-module__label--WZaBQ{width:30%}.src-shared-ui-FieldInput-FieldInput-module__fieldBlock--c0ix2{display:flex;flex-grow:1;gap:10px}.src-shared-ui-FieldInput-FieldInput-module__input--H49BP{width:100%}.src-shared-ui-FieldInput-FieldInput-module__error--l1p8f{color:var(--error-color-title);text-underline-offset:6px;text-decoration:solid underline var(--error-color-title) 4px}",""]),s.locals={FieldInput:"src-shared-ui-FieldInput-FieldInput-module__FieldInput--Nmd6r",label:"src-shared-ui-FieldInput-FieldInput-module__label--WZaBQ",fieldBlock:"src-shared-ui-FieldInput-FieldInput-module__fieldBlock--c0ix2",input:"src-shared-ui-FieldInput-FieldInput-module__input--H49BP",error:"src-shared-ui-FieldInput-FieldInput-module__error--l1p8f"};const a=s},9206:(e,r,t)=>{t.d(r,{A:()=>a});var n=t(1601),o=t.n(n),l=t(6314),s=t.n(l)()(o());s.push([e.id,".src-features-Auth-ui-AuthForm-AuthForm-module__AuthForm--HlN7p{width:300px;border-radius:10px;padding:20px;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}",""]),s.locals={AuthForm:"src-features-Auth-ui-AuthForm-AuthForm-module__AuthForm--HlN7p"};const a=s},9578:(e,r,t)=>{t.r(r),t.d(r,{AuthForm:()=>K,default:()=>ee});var n=t(6540),o=t(423),l=t(8036),s=t(3128),a=t(4705),u=t(3986),i=t(837),d=t(9950),c=t(5072),p=t.n(c),m=t(7825),h=t.n(m),f=t(7659),b=t.n(f),g=t(5056),x=t.n(g),I=t(540),v=t.n(I),y=t(1113),_=t.n(y),A=t(6593),O={};O.styleTagTransform=_(),O.setAttributes=x(),O.insert=b().bind(null,"head"),O.domAPI=h(),O.insertStyleElement=v(),p()(A.A,O);const j=A.A&&A.A.locals?A.A.locals:void 0;var F=t(4848);const w=["className","value","onChange","theme","type","autofocus","isError","isValidateOnInput"];function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}let N=function(e){return e.PRIMARY="primary",e.LOGIN="login",e}({});const k=e=>{const{className:r,value:t,onChange:l,theme:s=N.PRIMARY,type:i="text",autofocus:c,isError:p=!1,isValidateOnInput:m}=e,h=(0,u.A)(e,w),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;c&&(null===(e=f.current)||void 0===e||e.focus())},[c]);const b=(0,n.useMemo)(()=>({[j.error]:p}),[p]);return(0,F.jsx)(d.p,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?P(Object(t),!0).forEach(function(r){(0,a.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({ref:f,type:i,value:t,onChange:e=>{if("number"===i&&void 0!==h.min&&void 0!==h.max){const r=+e.target.value,t=+h.min,n=+h.max;null==l||l("".concat(r<t?t:r>n?n:r))}else null==l||l(e.target.value)},className:(0,o.cn)(j.Input,b,[r,j[s]]),onFocus:()=>{},onBlur:()=>{}},h))};var E=t(8577),S=t(1704),T=t(8919),D={};D.styleTagTransform=_(),D.setAttributes=x(),D.insert=b().bind(null,"head"),D.domAPI=h(),D.insertStyleElement=v(),p()(T.A,D);const B=T.A&&T.A.locals?T.A.locals:void 0,C=["className","value","onChange","label","children","theme","isError","placeholder"];function L(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function H(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?L(Object(t),!0).forEach(function(r){(0,a.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let V=function(e){return e.DEFAULT="defaultText",e.SMALL="smallText",e.LARGE="largeText",e}({});var R=function(e){return e.defaultText="defaultInput",e.smallText="largeInput",e.largeText="smallInput",e}(R||{});const Q=e=>{const{className:r,value:t,onChange:n,label:s,children:a,theme:d=V.DEFAULT,isError:c=!1,placeholder:p}=e,m=(0,u.A)(e,C);return(0,F.jsxs)(E.A,{name:s,className:(0,o.cn)(B.FieldInput,{},[r]),children:[s&&(0,F.jsx)(S.J,{className:(0,o.cn)(B.label,{[B.error]:c},[B[d]]),children:(0,F.jsx)(i.N,{text:s})}),(0,F.jsxs)(l.e,{className:B.fieldBlock,children:[(0,F.jsx)(k,H({value:t,onChange:n,className:(0,o.cn)(B.input,{},[B[R[d]]])},m)),a]})]})};var M=t(3405),Y=t(3485),Z=t(9701),q=t(9159);const z=e=>"sometokenfor".concat(e.username,"-").concat(e.password);var J=t(1468),X=t(3169),G=t(9206),U={};U.styleTagTransform=_(),U.setAttributes=x(),U.insert=b().bind(null,"head"),U.domAPI=h(),U.insertStyleElement=v(),p()(G.A,U);const W=G.A&&G.A.locals?G.A.locals:void 0;var $=t(6171);const K=e=>{const{className:r}=e,[t,a]=(0,n.useState)(()=>""),[u,i]=(0,n.useState)(()=>""),d=(0,Z.j)(),c=(0,J.d4)(e=>{var r;return(null===(r=e.loginForm)||void 0===r?void 0:r.error)||""});return console.log(c),(0,F.jsx)(s.l,{onSubmit:async e=>{e.preventDefault();const r=await d((0,$.t)({username:t,password:u}));"fulfilled"===r.meta.requestStatus&&r.payload&&d(Y.o.actions.setAuthData({username:t,session_id:r.payload}))},className:(0,o.cn)(W.AuthForm,{},[r]),children:(0,F.jsxs)(l.S,{gap:"8",children:[(0,F.jsx)(Q,{label:"Логин",value:t,onChange:a}),(0,F.jsx)(Q,{label:"Пароль",value:u,onChange:i,type:"password"}),(0,F.jsxs)(l.e,{justify:"end",max:!0,gap:"8",children:[(0,F.jsx)(M.$,{type:"button",onClick:async e=>{if(e.preventDefault(),0===t.length||0===u.length)return void window.alert("Заполните все поля");const r=(e=>{const r=localStorage.getItem(q.d),t=r?JSON.parse(r):null;return void 0===t[e.username]?(t[e.username]={password:e.password,token:z(e)},localStorage.setItem(q.d,JSON.stringify(t)),t[e.username]):(window.alert("Имя пользователя занято"),null)})({username:t,password:u});r&&r.token.length>0&&d(Y.o.actions.setAuthData({username:t,session_id:r.token}))},children:"Регистрация"}),(0,F.jsx)(M.$,{type:"submit",children:"Войти"})]}),c&&(0,F.jsx)(X.N,{text:c})]})})},ee=K}}]);